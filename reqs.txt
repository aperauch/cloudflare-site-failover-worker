Create an app using Typescript which uses the Hono framework and the Cloudflare TypeScript SDK.  
The app will be hosted as a Cloudflare Worker.  
The app will check the health of a MONITOR_URL every 1-minute using a cron trigger.  
If the MONITOR_URL returns an HTTPS status code of 200, then the app resets the failure counter and does nothing else.
If the app receives any other status code or does not receive any response within TIMEOUT_SECONDS seconds, it increments the failure counter.
When the failure counter reaches FAILURE_COUNT_THRESHOLD consecutive failures, the app uses the Cloudflare TypeScript SDK to modify an existing Redirect Rule by setting the "enabled" property to true.
The app will continue to monitor the MONITOR_URL every 1-minute. If the MONITOR_URL returns an HTTPS status code of 200 for RECOVERY_COUNT_THRESHOLD consecutive successes, the app uses the Cloudflare TypeScript SDK to modify an existing Redirect Rule by setting the "enabled" property to false and resets counters.

Maintenance Mode:
When maintenance mode is enabled or a scheduled maintenance window is active, the app will continue to run health checks and update counters, but will NOT make any changes to the Redirect Rule.
During maintenance mode, if thresholds are reached, the app will log what action would have been taken but skip the actual API call.
Maintenance mode state and scheduled maintenance windows are stored in Durable Objects for persistence.
The app will log health check results, counter states, and API actions to Cloudflare Workers Logs: https://developers.cloudflare.com/workers/observability/logs/workers-logs/
The app will store redirect rule changes, failure counters, and success counters in Cloudflare Durable Objects for persistence across executions.
Counters will persist across deployments and updates. Only manually reset counters via API or when explicitly requested.
If the Cloudflare API request to modify the Redirect Rule fails, the app will retry up to 3 times with exponential backoff (1s, 2s, 4s). After all retries fail, log the error and continue monitoring without resetting counters.
If Durable Objects are unavailable, the app will fail gracefully and return 503 status on API requests.
The app will support info, warn, error, and debug logging levels.  The default logging level will be set by the LOG_LEVEL environment variable.

The app will use the following environment variables:
- MONITOR_URL: The URL to monitor.
- FAILURE_COUNT_THRESHOLD: The number of consecutive failures before the app enables the Redirect Rule.
- RECOVERY_COUNT_THRESHOLD: The number of consecutive successes before the app disables the Redirect Rule.
- TIMEOUT_SECONDS: The number of seconds to wait for a response before considering the request as failed.
- REDIRECT_RULE_ID: The ID of the Redirect Rule to modify.
- ACCOUNT_ID: The ID of the Cloudflare account to modify the Redirect Rule in.
- ZONE_ID: The ID of the Cloudflare zone to modify the Redirect Rule in.
- CLOUDFLARE_API_TOKEN: The API token to use to modify the Redirect Rule.
- LOG_LEVEL: The logging level to use.  Default is debug.
- API_TOKEN: The API token to use to authenticate API requests.

Environment Variable Validation:
On worker initialization, validate all required environment variables are present and properly formatted:
- URLs must be valid HTTPS URLs
- Numeric thresholds must be positive integers 
- TIMEOUT_SECONDS must be between 1 and 30
- LOG_LEVEL must be one of: debug, info, warn, error
If validation fails, the worker will log errors and refuse to start the cron job.

Error Handling:
- If MONITOR_URL is unreachable on first startup, log warning and continue (will trigger failover after threshold)
- If Cloudflare API authentication fails (401/403), log critical error and disable further API calls until next deployment
- All API responses will include proper HTTP status codes (200, 401, 403, 429, 500, 503)
- Rate limit responses will include Retry-After header

The app will have API endpoints and the API schema documented by hono-openapi: https://hono.dev/examples/hono-openapi
The app will have the following API endpoints and all endpoints will require authentication using a Bearer token matching API_TOKEN:
All endpoints will implement rate limiting of 60 requests per minute per IP address.

- GET /status: Returns the current monitoring status with redacted secrets
  Response: { monitorUrl, failureCount, recoveryCount, lastCheckTime, nextCheckTime, redirectRuleEnabled, maintenanceMode, scheduledMaintenanceWindows, thresholds }

- GET /health: Returns worker operational health
  Response: { status: "healthy" | "degraded" | "unhealthy", durableObjectsAvailable, lastCronExecution, uptimeSeconds }

- GET /metrics: Returns Prometheus-format metrics
  Response: Text format with metrics: health_checks_total, failures_total, redirect_rule_changes_total, api_errors_total

- GET /redirect-rule: Returns current redirect rule state from Cloudflare API
  Response: { id, status, lastModified, lastChecked }

- GET /redirect-rule-history: Returns last 50 redirect rule state changes
  Response: { history: [{ timestamp, event: "enabled" | "disabled", reason, failureCount, recoveryCount }] }

- POST /simulate-failover: Forces failure counter to FAILURE_COUNT_THRESHOLD for testing
  Response: { success, newFailureCount, message }

- POST /simulate-recovery: Forces recovery counter to RECOVERY_COUNT_THRESHOLD for testing
  Response: { success, newRecoveryCount, message }

- POST /reset-counters: Resets failure and recovery counters to 0
  Response: { success, message }

- POST /maintenance-mode: Enable or disable maintenance mode
  Request Body: { enabled: boolean, reason?: string }
  Response: { success, maintenanceMode: boolean, message }

- POST /maintenance-window: Schedule a maintenance window during which redirect rule changes are blocked
  Request Body: { startTime: ISO8601, endTime: ISO8601, reason?: string }
  Response: { success, windowId: string, startTime: ISO8601, endTime: ISO8601, message }
  Note: Multiple maintenance windows can be scheduled. Past windows are automatically removed.

- GET /maintenance-windows: Returns all scheduled maintenance windows
  Response: { windows: [{ id, startTime, endTime, reason, isActive }] }

- DELETE /maintenance-window/:windowId: Cancels a scheduled maintenance window
  Response: { success, message }
